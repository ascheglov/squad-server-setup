# Update:
#   $ yc compute instance-group update cl1pghaagb2b5tnmpp9t --file yc-ig-spec.yaml
#

name: squad-group
service_account_id: aje70bbelrl4pvp2c4v8
description: "Squad servers"
instance_template:
  platform_id: standard-v2
  resources_spec:
    memory: 4g
    cores: 2
    core_fraction: 100
  boot_disk_spec:
    mode: READ_WRITE
    disk_spec:
      image_id: fd83bj827tp2slnpp7f0 # ubuntu-1804-lts-1579200157 (2020-01-16T18:45:38Z)
      type_id: network-hdd
      size: 20g
  network_interface_specs:
    - network_id: enpgniimbgke2vtfjlgj
      primary_v4_address_spec:
        one_to_one_nat_spec:
          ip_version: IPV4
  scheduling_policy:
    preemptible: true
  metadata:
    user-data: |
      #include
      https://raw.githubusercontent.com/ascheglov/squad-server-setup/master/cloud-config.yaml
deploy_policy:
  max_unavailable: 1
  max_expansion: 0
scale_policy:
  fixed_scale:
    size: 1
allocation_policy:
  zones:
    - zone_id: ru-central1-c

